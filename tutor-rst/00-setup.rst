0. Введение
===========

Для того, чтобы написать игру на Информе, нам потребуются:

* текстовый **редактор** для редактирования **исходных файлов** игры (я могу порекомендовать Programmer's Notepad или Notepad++);
* **библиотека** Информа, которую нужно будет включить в свою игру, чтобы работала общая модель и стандартное поведение;
* **компилятор** Информа, с помощью которого из исходного файла мы получим **файл игры**;
* **интерпретатор** Информа, с помощью которого в полученную игру можно будет сыграть.

Библиотеку и компилятор можно `скачать <http://rinform.stormway.ru/>`_ с сайта Информа. В архиве помимо прочего есть примеры игр.

На текущий момент (2017 г.) рекомендуемыми интерпретаторами являются `Windows Frotz <http://www.davidkinder.co.uk/frotz.html>`_ и `Gargoyle <https://github.com/garglk/garglk>`_.

====================
Установка и проверка
====================

Для проверки работоспособности и первоначальной настройки:

1. скачайте архив библиотеки и распакуйте его в отдельную, удобно доступную папку, например ``D:\RInform\``.

  В этой папке будет следующее содержимое::

    \demos\         демонстрационные игры
    \lib-mod\       русская версия библиотеки
    demos.bat       пакетный файл для компиляции демонстрационных игр
    inform-631.exe  компилятор Inform
    infrus.html     небольшая справка по RInform

2. В папке demos можно увидеть несколько файлов с расширением ``.inf`` — это исходные файлы демонстрационных игр. Их можно открыть и просмотреть в текстовом редакторе.

3. Файл ``demos.bat`` это пакетный файл («батник»), при помощи которого упрощается компилирование файлов игр. Запустите этот файл, на экране появится примерно следующее::

    D:\RInform>inform-631.exe +lib-mod +charset_map=lib-mod\cyrwin.cm +language_name
    =Russian -v5 demos\AdventR.inf demos\AdventR.z5
    Inform 6.31N for Win32 (1st December 2007)
    ...
    D:\RInform>inform-631.exe +lib-mod +charset_map=lib-mod\cyrwin.cm +language_name
    =Russian -v5 demos\RuinsR.inf demos\RuinsR.z5
    Inform 6.31N for Win32 (1st December 2007)

    D:\RInform>pause
    Для продолжения нажмите любую клавишу . . .

Если прочих сообщений нет, то всё прошло без ошибок.

4. В папке ``demos`` появятся файлы с расширением ``.z5`` — это готовые файлы игр, их можно запустить в интерпретаторе. Если установлены Windows Frotz или Gargoyle, то при запуске такого файла он скорее всего автоматически откроется в одном из этих интерпретаторов.

===============
Компиляция игры
===============

Чтобы скомпилировать игру, нужно через командную строку вызвать компилятор Информа ``inform-631.exe`` с верными параметрами.

Рассмотрим на примере демонстрационной игры Heidi::

    inform-631.exe +lib-mod +charset_map=lib-mod\cyrwin.cm +language_name=Russian -v5 demos\heidi.inf demos\Heidi.z5
    +lib-mod
        путь к папке, в которой хранится библиотека
    +charset_map=lib-mod\cyrwin.cm
        путь к файлу, в котором хранится таблица кириллических символов
    +language_name=Russian
        параметр языка игры
    -v5
        формат игры
    demos\Heidi.inf
        входной файл (исходник)
    demos\Heidi.z5
        выходной файл (файл игры)

Первые три параметра можно считать служебными, они просто необходимы для корректной компиляции.

Форматов игры есть несколько, но ныне используются только V5 и V8. Разница лишь в том, что максимальный размер игры формата V5 — 256 кб, а игры формата V8 — 512 кб. Этих объёмов более чем достаточно: для примера, файл довольно крупной игры «Вечерня», в которой более 250 кб чистого текста, занимает 370 кб.

Последними параметрами являются входной и выходной файлы. Перед ними также можно указать необязательные свитчи, например ``-D`` для компиляции дебаг-версии игры или ``-I`` для включения отладочного режима *Infix* в игре.

Чтобы упростить себе жизнь, стоит создать ``.bat``-файл, аналогичный ``demos.bat`` и вызывать его, когда нужно скомпилировать игру. Кроме того, продвинутые текстовые редакторы позволяют вызывать компилятор прямо из программы и выводят результаты и ошибки в отдельное окошко.