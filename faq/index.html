<!doctype html>
<html lang="ru">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="description" content="Платформа для создания текстовых игр с парсерным вводом">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <style>
      body {
        /*padding-top: 70px;*/
        position: relative;
      }
      a {
        color: #2578d2;
      }
    </style>
    <!-- Bootstrap CSS -->
    

    <title>Русский Информ — FAQ</title>
  </head>

  <body>
    
<nav class="navbar navbar-expand navbar-light bg-light border-bottom mb-2" role="navigation">
        <div class="container flex-column flex-sm-row">
          <span class="navbar-brand mb-0 h1"><a href="/">Русский Информ</a></span>
          <div class="collapse navbar-collapse">
          <ul class="navbar-nav flex-sm-row flex-column">
            <li class="nav-item"><a class="nav-link" href="/#about">О проекте</a></li>
            <li class="nav-item"><a class="nav-link" href="/#games">Игры</a></li>
            <li class="nav-item"><a class="nav-link" href="/#develop">Авторам</a></li>
            <li class="nav-item"><a class="nav-link" href="/faq/"><strong>FAQ</strong></a></li>
          </ul>
          <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link text-primary border-left" href="http://rinform.ifiction.ru/"><strong>Блог</strong></a></li>
          </ul>
          </div>
        </div>
      </nav>
    

    <div class="container">
    
    <div class="row">
      
      <div class="col-md-12">
        <h1 class="mb-5">FAQ — часто задаваемые вопросы</h1>

        <h2><a id="___Inform_2"></a>Особенности русской версии Inform</h2>
        <p>Для компиляции в Z-машину исходные файлы игры должны быть в кодировке Windows 1251. Пример командной строки для компиляции игры, где указаны все обязательные параметры:</p>
        <pre><code>inform.exe +library +charset_map=library\cyrwin.cm +language_name=Russian -v5 game.inf game.z5</code></pre>
        <p>Для компиляции в Glulx исходники должны быть в UTF-8. Пример командной строки для компиляции игры:</p>
        <pre><code>inform.exe +library +language_name=Russian -G -Cu $DICT_CHAR_SIZE=4 game.inf game.ulx</code></pre>
        <h3><a id="___16"></a>Как описывать объекты</h3>
        <p>Нижеперечисленное относится только к объектам. На комнаты (локации) эти правила не распространяются.</p>
        <ol>
        <li>
        <p>В имени объекта нужно отделить окончание (или окончания) прямым слешем (/), а точнее — те буквы, которые должны будут изменяться при склонении. Например: <strong>латунн/ая ламп/а</strong>, <strong>надпис/ь на стене</strong>, <strong>бел/ый туман/</strong>. Имя используется при выводе объектов во всевозможных ситуациях, в разных падежах.</p>
        </li>
        <li>
        <p>В свойстве <code>name</code> указываются слова, по которым парсер находит объекты. В русской версии нужно перечислять такие слова без окончаний. Здесь нужно не забыть указать и синонимы, по которым объект тоже должен находиться парсером.</p>
        </li>
        <li>
        <p>Каждому объекту (кроме комнат) обязательно нужно выдать один из атрибутов, соответствующий роду или числу объекта. Один из четырёх: <strong>male</strong> — мужской род, <strong>female</strong> — женский род, <strong>neuter</strong> — средний род, <strong>pluralname</strong> — множественное число.</p>
        <p>Примеры:</p>
        <pre><code>Object -&gt; &quot;друг/ой склон/ холма&quot;
    with name 'склон' 'сторон' 'холм',
    description &quot;Кто мешает изучить его самому?&quot;,
    has  scenery male;</code></pre>
        <pre><code>Object -&gt; &quot;груб/ые каменн/ые ступен/и&quot;
    with name 'груб' 'каменн' 'ступен',
    description &quot;Грубые каменные ступени ведут по куполу вверх.&quot;,
    has  scenery pluralname;</code></pre>
        </li>
        <li>
        <p>Особый случай — это существительные с беглыми гласными: ковёр (ковром), перекрёсток (перекрёстком) и так далее. Их нужно окружить двумя слешами, а к объекту добавить свойство <code>casegen</code>, по примеру ниже. Четвёртым параметром в функции <code>ICVowel</code> должна идти беглая гласная. Есть более сложные случаи, где новые буквы появляются (пятый параметр), см. пример ниже про «ручей».</p>
        <pre><code>Object -&gt; &quot;туманн/ый колод/е/ц/&quot;
    with name 'колодец' 'колодц',
    casegen [ beg end csID;
      return ICVowel (csID, beg, end, 'е', 0);
    ],
    description &quot;Из колодца поднимаются бесформенные клубы белого тумана.&quot;,
    has scenery male;</code></pre>
        <pre><code>Treasure -&gt; large_gold_nugget &quot;огромн/ый золот/ой самород/о/к/&quot;
    with name 'золот' 'огромн' 'слиток' 'слитк' 'самородок' 'самородк' 'кусок' 'куск',
    description &quot;Массивный кусок самородного золота!&quot;,
    casegen [ beg end csID;
      return ICVowel (csID, beg, end, 'о', 0);
    ],
    initial &quot;На полу поблескивает большой золотой самородок!&quot;,
    has male;</code></pre>
        <pre><code>Object Stream &quot;бурн/ый руч/е//й&quot;
    with name 'руче' 'ручь' 'речк' 'поток' 'вод',
    description &quot;Холодный бурный ручей струится вниз по каменистому руслу.&quot;,
    casegen [ beg end csID;
      return ICVowel (csID, beg, end, 'е', 'ь');
    ],
    has scenery male;</code></pre>
        </li>
        <li>
        <p>Есть случаи, когда нужно, чтобы у мужского объекта была женская логика для склонения имени. Например, мужское имя «Слава». В таком случае необходимо дополнительно выдать объекту атрибут <strong>fem_grammar</strong>.</p>
        </li>
        <li>
        <p>Если возникает случай, где парсер не в состоянии самостоятельно просклонять имя объекта (на вывод), необходимо указать свойство-функцию <code>casegen</code>. Третий параметр — это идентификатор падежа.</p>
        </li>
        <li>
        <p>Если парсер не распознаёт объект автоматически (на ввод), то следует пользоваться свойством-функцией <code>parse_name</code>. Подробное описание находится в <strong><a href="/docs/DM4.pdf">DM4</a></strong> на странице 209. В простом примере ниже имя персонажа «Моро» не склоняется.</p>
        <pre><code>parse_name [n;
    while (NextWord() == 'моро') n++;
    return n;
],</code></pre>
        </li>

        </ol>
        <h3><a id="________77"></a>Как проверить, что объект верно склоняется по падежам?</h3>
        <p>Для этого есть удобная команда <strong>мета! форм</strong>. Чтобы она работала, удостоверьтесь, что игра скомпилирована в режиме Debug (с флагом -D).</p>
        <p class="bg-light">&gt;<strong>мета! форм самородок</strong><br>
Объект «огромн/ый золот/ой самород/о/к/» (<strong>Ед.ч./М.р.</strong>):<br>
<br>
<strong>И.п.</strong>: Огромный золотой самородок<br>
<strong>Р.п.</strong>: Огромного золотого самородка<br>
<strong>Д.п.</strong>: Огромному золотому самородку<br>
<strong>В.п.</strong>: Огромный золотой самородок<br>
<strong>Т.п.</strong>: Огромным золотым самородком<br>
<strong>П.п.</strong>: Огромном золотом самородке<br>
<br>
&gt;<br>
        </p>
        <h3><a id="______106"></a>Как вывести объект в каком-либо падеже</h3>
<p>Для этого есть следующие функции. Вторая функция нужна для вывода с большой буквы (обычно, в начале предложений).</p>
<ul>
<li><code>cNom</code> и <code>ССNom</code> — именительный (Nominative).</li>
<li><code>cAcc</code> и <code>ССAcc</code> — винительный (Accusative).</li>
<li><code>cGen</code> и <code>ССGen</code> — родительный (Genitive).</li>
<li><code>cDat</code> и <code>ССDat</code> — дательный (Dative).</li>
<li><code>cIns</code> и <code>ССIns</code> — творительный (Instrumental).</li>
<li><code>cPre</code> и <code>ССPre</code> — предложный (Prepositive).</li>
</ul>
<pre><code>&quot;Вы тщательно установили неуклюжую монстроподобную фотокамеру,
 направили свет лампы на цель, и терпеливо дождались,
 пока экспонирование &quot;, (cGen) noun, &quot; не завершится.&quot;;
</code></pre>
<pre><code>print_ret &quot;Вам нет нужды беспокоиться о &quot;, (cPre) self, &quot;.&quot;;
</code></pre>
<pre><code>[ SaluteSub;
    if (noun has animate)
        print_ret (CCNom) noun, &quot; приветствует тебя.&quot;;
    print_ret (CCNom) noun, &quot; не замечает этого.&quot;;
];
</code></pre>
<h3><a id="__135"></a>Вспомогательные функции</h3>
<p>Все эти функции принимают объект, и вызывать их в коде нужно как <code>(function) noun</code>.</p>
<ul>
<li><code>PronounS</code> выводит местоимение, подходящее объекту («ты», «он», «она», «оно», «они»).</li>
<li><code>Pronoun</code> работает как <code>PronounS</code>, но выводит с заглавной буквы.</li>
<li><code>SAEnd</code> выводит окончание краткой формы прилагательных или причастий («открыт<strong>а</strong>», «открыт<strong>о</strong>», «открыт<strong>ы</strong>»).</li>
<li><code>V1aEnd</code> выводит окончания глаголов -ет или -ут.</li>
<li><code>V1bEnd</code> выводит окончания глаголов -ет или -ют.</li>
<li><code>V2aEnd</code> выводит окончания глаголов -ит или -ат.</li>
<li><code>V2bEnd</code> выводит окончания глаголов -ит или -ят.</li>
<li><code>VPEnd</code> выводит окончание для глаголов в прошедшем времени («пропал», «пропал<strong>а</strong>», «пропал<strong>о</strong>», «пропал<strong>и</strong>»).</li>
<li><code>AEnd</code>: окончания прилагательных -ый, -ая, -ое, -ые.</li>
<li><code>AEnd2</code>: окончания прилагательных -ий, -ая, -ое, -ие.</li>
<li><code>AEnd3</code>: окончания прилагательных -ой, -ая, -ое, -ые.</li>
<li><code>PEnding1</code>: -им, -ой, -ими.</li>
<li><code>PEnding2</code>: -ым, -ой, -ыми.</li>
<li><code>GenIt</code>: его, её, их.</li>
<li><code>GenIt2</code>: него, неё, них.</li>
<li><code>DatIt</code>: ему, ей, им.</li>
<li><code>DatIt2</code>: нему, ней, ним.</li>
<li><code>InsIt</code>: им, ей, ими</li>
<li><code>InsIt2</code>: ним, ней, ними.</li>
</ul>
        <h3><a id="____95"></a>Как описывать русские глаголы</h3>
        <ol>
        <li>
        <p>Глаголы нужно перечислять по корневой части. Парсер распознает приставки («по», «за» и т.д.) и суффиксы-окончания («ся», «ять», «ать» и т.д.) автоматически.</p>
        </li>
        <li>
        <p>Нужно учесть и то, что глаголы могут вводиться и в повелительном наклонении: например, не только «взять» (вз), но и «возьми» (возьм). Это необходимо для приказов, которые игрок может отдавать NPC: «гоблин, отдай мне ключ».</p>
        </li>
        <li>
        <p>Для существительных, с которыми оперирует глагол, нужно указывать токены. Какой токен использовать, определяет падеж существительного в данном контексте. Например, «взять ключ» — винительный падеж (Accusative), «дотронуться до двери» — дверь в родительном падеже (Genitive).</p>
        <p>Есть следующие токены:
        <ul>
          <li><code>cNom_noun</code> — именительный (Nominative).</li>
          <li><code>cAcc_noun</code> — винительный (Accusative).</li>
          <li><code>cGen_noun</code> — родительный (Genitive).</li>
          <li><code>cDat_noun</code> — дательный (Dative).</li>
          <li><code>cIns_noun</code> — творительный (Instrumental).</li>
          <li><code>cPre_noun</code> — предложный (Prepositive).</li>
        </ul></p>
        <p>Кроме этого, можно использовать более строгие токены, соответствующие категориям объектов:
        <ul>
        <li><code>cIns_held</code>, <code>cAcc_held</code>, <code>cGen_held</code> — для объектов, которые есть в инвентаре игрока (у которых есть атрибут held).</li>
        <li><code>cAcc_creat</code>, <code>cGen_creat</code>, <code>cDat_creat</code> — для живых объектов (NPC с атрибутом animate).</li>
        <li><code>cAcc_multi</code> — для группы объектов (например, команда «взять» позволяет брать более одного объекта).</li>
        <li><code>cAcc_multiheld</code>, <code>cAcc_multiexcept</code>, <code>cAcc_multiinside</code>.</li>
        </ul>
        </p>
        </li>
        <li>
        <p>Также, не обязательно, но рекомендуется добавить объект с этими корневыми частями в VerbDepot, как указано в примере ниже. В нём нужно указать полную форму глагола, которая иногда выводится парсером.</p>
        <pre><code>! &quot;вязать&quot;
Verb 'вяз' 'вяж'
    * cAcc_noun         -&gt; Tie
    * cAcc_noun 'к' cDat_noun   -&gt; Tie      ! &quot;привязать&quot;
    * 'к' cDat_noun cAcc_noun   -&gt; Tie reverse
    * cAcc_noun 'с'/'со' cIns_noun  -&gt; Tie      ! &quot;связать&quot;
    * 'с'/'со' cIns_noun cAcc_noun  -&gt; Tie reverse;

Object &quot;вязать&quot; VerbDepot
    with name 'вяз' 'вяж';</code></pre>
        </li>
        </ol>


      </div>
    </div>

    <hr>
    <footer class="footer">
    <p>Всеволод Зубарев (yandexx, y4n), Ugo, cheshire | 2010-2018</p>
    </footer>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
    (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
        try {
          w.yaCounter14709598 = new Ya.Metrika({id:14709598, enableAll: true});
        } catch(e) {}
      });
      
      var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f);
      } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="//mc.yandex.ru/watch/14709598" style="position:absolute; left:-9999px;" class="img-rounded" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

    <script type="text/javascript" src="http://apis.google.com/js/plusone.js">
      {lang: 'ru'}
    </script>

    </div>
  </body>
</html>